{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\au\\\\Desktop\\\\Python projects\\\\React\\\\disco239\\\\disco239\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport { Html5Qrcode } from \"html5-qrcode\";\nimport React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [isEnabled, setEnabled] = useState(false);\n  const [name, setName] = useState(\"\");\n  const [class_name, setClassName] = useState(\"\");\n  const [arrived, setArrived] = useState(false);\n  const [exists, setExists] = useState(false);\n  const [qrMessage, setQrMessage] = useState(\"\");\n  const [imageUrl, setImageUrl] = useState(\"\");\n  const fetchUrl = \"https://192.168.0.108:2399\";\n  useEffect(() => {\n    const config = {\n      fps: 10,\n      qrbox: {\n        width: 200,\n        height: 200\n      }\n    };\n    const html5QrCode = new Html5Qrcode(\"qrCodeContainer\");\n    const qrScanerStop = () => {\n      if (html5QrCode && html5QrCode.isScanning) {\n        html5QrCode.stop().then(ignore => console.log(\"Scaner stop\")).catch(err => console.log(\"Scaner error\"));\n      }\n    };\n    const qrCodeSuccess = async decodedText => {\n      setEnabled(false);\n      fetch(fetchUrl + '/get-user-data', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          uid: decodedText\n        })\n      }).then(res => res.json().then(data => {\n        setExists(data.exists);\n        setQrMessage(decodedText);\n        if (data.exists) {\n          setName(data.name);\n          setClassName(data.class_name);\n          setArrived(data.arrived);\n          if (data.image_link !== \"\") {\n            fetch(fetchUrl + '/get-image', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify({\n                image_link: data.image_link\n              })\n            }).then(response => response.blob().then(blob => {\n              const url = URL.createObjectURL(blob);\n              setImageUrl(url);\n            }));\n          }\n        }\n      }));\n    };\n    if (isEnabled) {\n      html5QrCode.start({\n        facingMode: \"environment\"\n      }, config, qrCodeSuccess);\n      setQrMessage(\"\");\n      setImageUrl(\"\");\n    } else {\n      qrScanerStop();\n    }\n    return () => {\n      qrScanerStop();\n    };\n  }, [isEnabled]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    class: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"centered-container\",\n      children: [qrMessage && !exists && /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"error-message\",\n        children: \"\\u0412\\u0430\\u043C \\u043F\\u043E\\u0434\\u0441\\u0443\\u043D\\u0443\\u043B\\u0438 \\u0445\\u0443\\u0439\\u043D\\u044E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 32\n      }, this), qrMessage && exists && name !== \"guest\" && name !== \"test\" ? imageUrl ? /*#__PURE__*/_jsxDEV(\"img\", {\n        src: imageUrl,\n        alt: \"Fetched from Flask server\",\n        style: {\n          borderRadius: '15px',\n          width: '250px',\n          height: 'auto'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 16\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u041D\\u0435\\u0442 \\u0444\\u043E\\u0442\\u043A\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 16\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 18\n      }, this), qrMessage && exists && name === \"guest\" && /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"other-message\",\n        children: \"\\u0413\\u043E\\u0441\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 51\n      }, this), qrMessage && exists && name === \"test\" && /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"other-message\",\n        children: \"\\u0422\\u0435\\u0441\\u0442\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 50\n      }, this), qrMessage && exists && name !== \"guest\" && name !== \"test\" && /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"name-message\",\n        children: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 70\n      }, this), qrMessage && exists && /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"name-message\",\n        children: class_name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 31\n      }, this), qrMessage && exists && arrived ? /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"arrived-message\",\n        children: \"\\u0423\\u0436\\u0435 \\u0432\\u0445\\u043E\\u0434\\u0438\\u043B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 43\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 91\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"centered-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"qrCodeContainer\",\n        style: {\n          width: `${isEnabled * 300}px`,\n          height: `${isEnabled * 300}px`,\n          position: 'relative'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"start-button\",\n      onClick: async () => {\n        setEnabled(!isEnabled);\n      },\n      children: isEnabled ? \"Выключить камеру\" : \"Включить камеру\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"aXzuz/slvKXrdJ8qsvI/FspYY40=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["Html5Qrcode","React","useState","useEffect","jsxDEV","_jsxDEV","App","_s","isEnabled","setEnabled","name","setName","class_name","setClassName","arrived","setArrived","exists","setExists","qrMessage","setQrMessage","imageUrl","setImageUrl","fetchUrl","config","fps","qrbox","width","height","html5QrCode","qrScanerStop","isScanning","stop","then","ignore","console","log","catch","err","qrCodeSuccess","decodedText","fetch","method","headers","body","JSON","stringify","uid","res","json","data","image_link","response","blob","url","URL","createObjectURL","start","facingMode","class","children","className","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","style","borderRadius","id","position","onClick","_c","$RefreshReg$"],"sources":["C:/Users/au/Desktop/Python projects/React/disco239/disco239/src/App.js"],"sourcesContent":["import { Html5Qrcode } from \"html5-qrcode\";\nimport React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\n\nfunction App() {\n  const [isEnabled, setEnabled] = useState(false);\n  const [name, setName] = useState(\"\");\n  const [class_name, setClassName] = useState(\"\");\n  const [arrived, setArrived] = useState(false);\n  const [exists, setExists] = useState(false);\n  const [qrMessage, setQrMessage] = useState(\"\");\n  const [imageUrl, setImageUrl] = useState(\"\");\n\n  const fetchUrl = \"https://192.168.0.108:2399\";\n\n  useEffect(() => {\n    const config = { fps: 10, qrbox: { width: 200, height: 200 } };\n\n    const html5QrCode = new Html5Qrcode(\"qrCodeContainer\");\n\n    const qrScanerStop = () => {\n      if (html5QrCode && html5QrCode.isScanning) {\n        html5QrCode\n          .stop()\n          .then((ignore) => console.log(\"Scaner stop\"))\n          .catch((err) => console.log(\"Scaner error\"));\n      }\n    };\n\n    const qrCodeSuccess = async(decodedText) => {\n      setEnabled(false);\n      fetch(fetchUrl + '/get-user-data', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ uid: decodedText }),\n      }).then((res) =>\n        res.json().then((data) => {\n            setExists(data.exists);\n            setQrMessage(decodedText);\n            if(data.exists){\n              setName(data.name);\n              setClassName(data.class_name);\n              setArrived(data.arrived);\n              if(data.image_link !== \"\"){\n                fetch(fetchUrl + '/get-image', {\n                  method: 'POST',\n                  headers: {\n                    'Content-Type': 'application/json',\n                  },\n                  body: JSON.stringify({ image_link: data.image_link}),\n                }).then((response) => response.blob().then((blob) => {\n                  const url = URL.createObjectURL(blob);\n                  setImageUrl(url);\n              }));\n              }\n            }\n\n        })\n    );\n    };\n\n    if (isEnabled) {\n      html5QrCode.start({ facingMode: \"environment\" }, config, qrCodeSuccess);\n      setQrMessage(\"\");\n      setImageUrl(\"\");\n    } else {\n      qrScanerStop();\n    }\n\n    return () => {\n      qrScanerStop();\n    };\n  }, [isEnabled]);\n\n  return (\n    <div class=\"container\">\n      <div class=\"centered-container\">\n      {qrMessage && !exists && <h1 className=\"error-message\">Вам подсунули хуйню</h1>}\n               {(qrMessage && exists && name !== \"guest\" && name !== \"test\") ? (imageUrl ? (\n               <img\n                     src={imageUrl}\n                     alt=\"Fetched from Flask server\"\n                     style={{\n                         borderRadius: '15px', \n                         width: '250px', \n                         height: 'auto',\n                     }}\n                 />\n             ) : (\n               <p>Нет фотки</p>\n             )):(<p></p>)}\n      {qrMessage && exists && name === \"guest\" && <h1 className=\"other-message\">Гость</h1>}\n      {qrMessage && exists && name === \"test\" && <h1 className=\"other-message\">Тест</h1>}\n      {qrMessage && exists && name !== \"guest\" && name !== \"test\" && <h1 className=\"name-message\">{name}</h1>}\n      {qrMessage && exists && <h1 className=\"name-message\">{class_name}</h1>}\n      {(qrMessage && exists && arrived) ? <h1 className=\"arrived-message\">Уже входил</h1>:<p></p>}\n      </div>\n      <div class=\"centered-container\">\n      <div id=\"qrCodeContainer\"   style = {{width: `${isEnabled * 300}px`, height: `${isEnabled * 300}px`, position: 'relative'}} / >\n      </div>\n      <button className=\"start-button\" onClick={async() => {setEnabled(!isEnabled);}}>\n         {isEnabled ? \"Выключить камеру\" : \"Включить камеру\"}\n       </button>\n  </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}