{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\au\\\\Desktop\\\\Python projects\\\\React\\\\disco239\\\\disco239\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport { Html5Qrcode } from \"html5-qrcode\";\nimport React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [isEnabled, setEnabled] = useState(false);\n  const [name, setName] = useState(\"\");\n  const [class_name, setClassName] = useState(\"\");\n  const [arrived, setArrived] = useState(false);\n  const [exists, setExists] = useState(false);\n  const [qrMessage, setQrMessage] = useState(\"\");\n  const [imageUrl, setImageUrl] = useState(\"\");\n  const fetchUrl = \"https://192.168.0.110:2399\";\n  useEffect(() => {\n    const config = {\n      fps: 10,\n      qrbox: {\n        width: 200,\n        height: 200\n      }\n    };\n    const html5QrCode = new Html5Qrcode(\"qrCodeContainer\");\n    const qrScanerStop = () => {\n      if (html5QrCode && html5QrCode.isScanning) {\n        html5QrCode.stop().then(ignore => console.log(\"Scaner stop\")).catch(err => console.log(\"Scaner error\"));\n      }\n    };\n    const qrCodeSuccess = async decodedText => {\n      fetch(fetchUrl + '/get-user-data', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          uid: decodedText\n        })\n      }).then(res => res.json().then(data => {\n        setExists(data.exists);\n        if (data.exists) {\n          setName(data.name);\n          setClassName(data.class_name);\n          setArrived(data.arrived);\n          if (data.image_link !== \"\") {\n            fetch(fetchUrl + '/get-image', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify({\n                image_link: data.image_link\n              })\n            }).then(response => response.blob().then(blob => {\n              const url = URL.createObjectURL(blob);\n              setImageUrl(url);\n            }));\n          }\n        }\n        setQrMessage(decodedText);\n        setEnabled(false);\n      }));\n    };\n    if (isEnabled) {\n      html5QrCode.start({\n        facingMode: \"environment\"\n      }, config, qrCodeSuccess);\n      setQrMessage(\"\");\n    } else {\n      qrScanerStop();\n    }\n    return () => {\n      qrScanerStop();\n    };\n  }, [isEnabled]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    class: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"centered-container\",\n      style: {\n        width: `${200}px`,\n        height: `${200}px`\n      },\n      children: qrMessage && !exists && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error-message\",\n        children: \"\\u0412\\u0430\\u043C \\u043F\\u043E\\u0434\\u0441\\u0443\\u043D\\u0443\\u043B\\u0438 \\u0445\\u0443\\u0439\\u043D\\u044E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 32\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"centered-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"qrCodeContainer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"start-button\",\n      onClick: async () => {\n        setEnabled(!isEnabled);\n      },\n      children: isEnabled ? \"Выключить камеру\" : \"Включить камеру\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this)\n  // <div >\n  //   <div id=\"qrCodeContainer\" />\n  //   <p>huy</p>\n  //   {/* {qrMessage && !exists && <p className=\"error-message\">Вам подсунули хуйню</p>}\n  //   {qrMessage && exists && arrived  && <p className=\"error-message\">Уже входил</p>} */}\n  //   {exists &&\n  //   <div>\n  //         <p className = \"qr-message\">Image with Rounded Corners</p>\n  //         {imageUrl ? (\n  //             <img\n  //                 src={imageUrl}\n  //                 alt=\"Fetched from Flask server\"\n  //                 style={{\n  //                     borderRadius: '15px', \n  //                     width: '300px', \n  //                     height: 'auto',\n  //                 }}\n  //             />\n  //         ) : (\n  //             <p>Loading...</p>\n  //         )} \n  //     </div>}\n  //   <button className=\"start-button\" onClick={async() => {setEnabled(!isEnabled);}}>\n  //     {isEnabled ? \"Выключить камеру\" : \"Включить камеру\"}\n  //   </button>\n  // </div>\n  ;\n}\n_s(App, \"aXzuz/slvKXrdJ8qsvI/FspYY40=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["Html5Qrcode","React","useState","useEffect","jsxDEV","_jsxDEV","App","_s","isEnabled","setEnabled","name","setName","class_name","setClassName","arrived","setArrived","exists","setExists","qrMessage","setQrMessage","imageUrl","setImageUrl","fetchUrl","config","fps","qrbox","width","height","html5QrCode","qrScanerStop","isScanning","stop","then","ignore","console","log","catch","err","qrCodeSuccess","decodedText","fetch","method","headers","body","JSON","stringify","uid","res","json","data","image_link","response","blob","url","URL","createObjectURL","start","facingMode","class","children","style","className","fileName","_jsxFileName","lineNumber","columnNumber","id","onClick","_c","$RefreshReg$"],"sources":["C:/Users/au/Desktop/Python projects/React/disco239/disco239/src/App.js"],"sourcesContent":["import { Html5Qrcode } from \"html5-qrcode\";\nimport React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\n\nfunction App() {\n  const [isEnabled, setEnabled] = useState(false);\n  const [name, setName] = useState(\"\");\n  const [class_name, setClassName] = useState(\"\");\n  const [arrived, setArrived] = useState(false);\n  const [exists, setExists] = useState(false);\n  const [qrMessage, setQrMessage] = useState(\"\");\n  const [imageUrl, setImageUrl] = useState(\"\");\n\n  const fetchUrl = \"https://192.168.0.110:2399\";\n\n  useEffect(() => {\n    const config = { fps: 10, qrbox: { width: 200, height: 200 } };\n\n    const html5QrCode = new Html5Qrcode(\"qrCodeContainer\");\n\n    const qrScanerStop = () => {\n      if (html5QrCode && html5QrCode.isScanning) {\n        html5QrCode\n          .stop()\n          .then((ignore) => console.log(\"Scaner stop\"))\n          .catch((err) => console.log(\"Scaner error\"));\n      }\n    };\n\n    const qrCodeSuccess = async(decodedText) => {\n      fetch(fetchUrl + '/get-user-data', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ uid: decodedText }),\n      }).then((res) =>\n        res.json().then((data) => {\n            setExists(data.exists);\n            if(data.exists){\n              setName(data.name);\n              setClassName(data.class_name);\n              setArrived(data.arrived);\n              if(data.image_link !== \"\"){\n                fetch(fetchUrl + '/get-image', {\n                  method: 'POST',\n                  headers: {\n                    'Content-Type': 'application/json',\n                  },\n                  body: JSON.stringify({ image_link: data.image_link}),\n                }).then((response) => response.blob().then((blob) => {\n                  const url = URL.createObjectURL(blob);\n                  setImageUrl(url);\n              }));\n              }\n            }\n            setQrMessage(decodedText);\n            setEnabled(false);\n\n        })\n    );\n    };\n\n    if (isEnabled) {\n      html5QrCode.start({ facingMode: \"environment\" }, config, qrCodeSuccess);\n      setQrMessage(\"\");\n    } else {\n      qrScanerStop();\n    }\n\n    return () => {\n      qrScanerStop();\n    };\n  }, [isEnabled]);\n\n  return (\n    <div class=\"container\">\n      <div class=\"centered-container\" style = {{width: `${200}px`, height: `${200}px`}}>\n      {qrMessage && !exists && <p className=\"error-message\">Вам подсунули хуйню</p>}\n      </div>\n      <div class=\"centered-container\">\n      <div id=\"qrCodeContainer\" />\n      </div>\n      <button className=\"start-button\" onClick={async() => {setEnabled(!isEnabled);}}>\n         {isEnabled ? \"Выключить камеру\" : \"Включить камеру\"}\n       </button>\n  </div>\n    // <div >\n    //   <div id=\"qrCodeContainer\" />\n    //   <p>huy</p>\n    //   {/* {qrMessage && !exists && <p className=\"error-message\">Вам подсунули хуйню</p>}\n    //   {qrMessage && exists && arrived  && <p className=\"error-message\">Уже входил</p>} */}\n    //   {exists &&\n    //   <div>\n    //         <p className = \"qr-message\">Image with Rounded Corners</p>\n    //         {imageUrl ? (\n    //             <img\n    //                 src={imageUrl}\n    //                 alt=\"Fetched from Flask server\"\n    //                 style={{\n    //                     borderRadius: '15px', \n    //                     width: '300px', \n    //                     height: 'auto',\n    //                 }}\n    //             />\n    //         ) : (\n    //             <p>Loading...</p>\n    //         )} \n    //     </div>}\n    //   <button className=\"start-button\" onClick={async() => {setEnabled(!isEnabled);}}>\n    //     {isEnabled ? \"Выключить камеру\" : \"Включить камеру\"}\n    //   </button>\n    // </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}